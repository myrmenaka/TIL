# AlmaLinuxコマンド
## ファイル・ディレクトリ操作
### ■ ls：ファイル一覧表示
```
ls [オプション] [ファイルまたはディレクトリ]: ファイル、ディレクトリの参照
```
オプション
```
ls -a   # 隠しファイル含む
ls -l   # 詳細表示
ls -R   # 再帰的に表示（配下すべて）
```
※再帰＝指定したディレクトリ以下全て

### ■ cat：ファイル内容表示
```
cat [ファイル名]: ファイルの内容を表示
```
オプション
```
cat -n file   # 行番号付き
```
### ■ less：ページング表示（検索可能）
```
less [ファイル]: ページング表示  
```
※ 操作  
`/文字列` ：前方検索  
`?文字列` ：後方検索  

### ■ touch：空ファイル作成
```
touch [ファイル名]: 空のファイル作成
```
### ■ pwd: カレントディレクトリ（現在のディレクトリ）の表示
```
pwd
```
### ■ cd：ディレクトリ移動
```
cd: ホームディレクトリに移動  
cd [ディレクトリ]: 指定ディレクトリに移動  
cd -: 直前のディレクトリに移動  
```
### ■ mkdir：ディレクトリ作成
```
mkdir [ディレクトリ名]: ディレクトリ作成  
mkdir -p [ディレクトリ/ディレクトリ]: 上位ディレクトリもまとめて作成  
```
### ■ rmdir：空ディレクトリ削除
```
rmdir [ディレクトリ名]: ディレクトリの削除  
rmdir -p [ディレクトリ/ディレクトリ]: 指定した階層までのディレクトリを一括削除  
```
### ■ rm：ファイル削除
```
rm [オプション] [ファイル名（ディレクトリ名）]: ファイルの削除  
```
オプション
```
rm -f file     # 強制削除
rm -r dir     # ディレクトリ以下一括削除（ファイル含む）
rm -i file     # 削除時確認
```

### ■ cp：コピー
```
cp [オプション] [コピー元] [コピー先]: ファイルのコピー  
```
オプション
```
cp -r dir dest     # ディレクトリをコピー（ディレクトリ内のファイルも含む）
```
※コピー先に存在しないファイル名を指定すると、コピー先に指定したファイル名でコピーが保存される  
※コピー先に同名ファイルがあると上書きされる  

### ■ mv：移動・名前変更
```
mv [移動元] [移動先]: ファイル、ディレクトリの移動  
```
※移動先が存在しないファイル名またはディレクトリ名の場合指定した名前に変更される  

### ■ find：ファイル検索
```
find [ディレクトリ] -name [ファイル名]: ファイルがどこのディレクトリに存在するか検索
```
### ■ which：コマンドのパス確認
```
which [コマンド名]: コマンドのパスを表示  
```
## リダイレクト・パイプ
### ■ 出力をファイルへ
```
コマンド > [出力先ファイル]: 上書きでファイルに書き込み  
コマンド >> [出力先ファイル]: 追記でファイルに書き込み  
cat > [出力先ファイル]: キーボードから入力した文字列をファイルに書き込みして保存
```
### ■ エラー出力をファイルへ
```
[コマンド] 2> [出力先ファイル]: エラーメッセージをファイルに書き込む
```
### ■ パイプ
```
[コマンド1] | [コマンド2]: コマンド1の出力をコマンド2の入力として渡す  
```
## head / tail
```
head [オプション] [ファイル]: 先頭の表示
（-n 行=行数指定）
tail [オプション] [ファイル]: 末尾の表示
（-n 行=行数指定）
（-f=開きっぱなしにできる）
```
例：
```
head -n 10 file   # 先頭10行
tail -n 10 file   # 末尾10行
tail -f file      # 監視（ログ確認）
```

## grep：文字列検索
```
grep [オプション] [検索条件] [ファイル]: 指定された条件でデータ内の文字列を検索
```
オプション
```
grep "word" file
grep -i   # 大文字小文字無視
grep -n   # 行番号を表示
grep -r   # ディレクトリ内すべて検索
grep -w   # 単語完全一致
grep -x   # 行全体完全一致
grep -v   # 否定（含まない）
grep -e   # 複数条件
```

## vi：テキスト編集
```
vi [ファイル]: viエディタの起動
```
## vi操作（一部抜粋）
### ■ 基本操作
```
i      : 挿入モード（文字入力）
Esc    : ノーマルモードへ戻る
:w     : 保存
:q     : 終了
:wq    : 保存して終了
:q!    : 保存せず終了（強制終了）
```
### ■ よく使う操作
```
dd     : 行削除
yy     : 行コピー
p      : 貼り付け
/文字  : 検索
n      : 次の検索結果へ
```

## ユーザー・グループ管理
### ■ su：ユーザー切替
```
su [ユーザー]: 他のユーザーに切り替え  
su [-]: rootユーザーに切り替え（rootパスワードが必要）  
```
### ■ id：ユーザー情報確認
```
id [ユーザー]: ユーザーIDや所属しているグループを確認
```
### ■ sudo：管理者権限で実行
```
sudo [コマンド]: root権限が必要なシステム管理を行える  
```
※ sudo を使うには `wheel` グループ所属が必要
### ■ ユーザー作成・パスワード設定
```
sudo useradd [ユーザー名]: ユーザーの作成  
sudo passwd [ユーザー]: パスワードの設定  
```
### ■ usermod：ユーザー設定変更
```
usermod [オプション] [ユーザー名]: ユーザーアカウント情報の変更  
usermod [-aG] [グループ名] [ユーザー名]: ユーザーをグループに追加（ユーザー側から）
```
オプション
```
usermod -g group user     # プライマリグループ変更
usermod -G group user     # サブグループ設定（上書き）
usermod -aG group user    # サブグループ追加
```
### ■ gpasswd：グループのメンバー管理 
```
gpasswd [オプション] [ユーザー名] [グループ名]
```
オプション
```
gpasswd -a user group   # ユーザーをグループに追加
gpasswd -d user group   # ユーザーをグループから削除
gpasswd -M "u1, u2" group   # グループメンバーを一括設定（上書き）

```
### ■ グループ作成・削除
```
sudo groupadd [グループ名]: グループの作成  
groupdel [グループ名]: グループの削除  
```
### ■ groups: 自身の所属グループ確認
```
groups
```

## パーミッション・所有者
### ■ chown：所有者変更
```
sudo chown [オプション] [ユーザー]（:[グループ]） [ファイル]: ファイルの所有者（所有グループ）を変更  
（-r=再帰的変更）
```
例：
```
sudo chown user file
sudo chown user:group file
sudo chown -R user:group dir
```
### ■ chgrp：グループ変更
```
chgrp [グループ] [ファイル]: ファイルの所有グループの変更（root権限不要）
```
### ■ chmod：アクセス権変更
```
chmod [モード]（,[モード]） [ファイル]: ファイルのアクセス権限の変更
```
モード：  
u(所有ユーザー)g(所有グループ)o(その他)a(ugo全て)  
パーミッション：  
r(読み：4)w(書き：2)x(実行：1)  
※数値は8進数  
設定(=)追加(+)取り消し(-)
※`=`は上書き  

例：  
```
chmod g+w,o+w test
```
※または8進数の合計値  
例：-rw-rw-r--.であれば、664  
※ r=4, w=2, x=1 の合計  
```
chmod 664 test
```
※ SELinux により見た目の権限だけではアクセスできない場合がある  
→ アクセス権限は見た目上変えることは可能だが、内部的には元の所有者情報は残る

## ネットワーク関連
### ■ IPアドレス確認
```
ip a（ddress） [インターフェース]: IPアドレスの確認  
```
※インターフェースを省略すると全てのインターフェース情報  

### ■ ping：疎通確認
```
ping [IPアドレスまたはホスト名]: IP通信の確認
```
### ■ dig：名前解決確認
```
dig [ホスト名]: 名前解決ができるかどうかを確認  
```
※名前解決＝ホスト名をIPアドレスに変換する仕組み  
### ■ ルーティング確認
```
ip route : コンピュータに設定されているルーティングを確認
```
## プロセス管理
### ■ ps : 動作しているプロセスの確認
```
ps
```
オプション
```
ps f   # プロセスの親子関係の表示
ps u   # プロセスを実行したユーザー情報の表示
ps x   # バックグラウンドで動作しているプロセスの情報を表示
ps a   # システム全体のプロセスを確認
ps ax  # すべてのプロセスを確認
```
### ■ pstree：プロセスの親子関係をツリー表示
```
pstree
```

### ■ top : 実行中のプロセスの状態をリアルタイムで表示
```
top
```

### ■ kill：プロセス終了
```
kill [オプション] [プロセスID]: シグナルを送信（停止・終了）
```
オプション
```
kill PID
kill -シグナル番号   # 強制終了
kill -l   # シグナル一覧（シグナルの種類を表示）
```
※ -シグナル番号＝指定したシグナル番号のシグナルをプロセスに送信する

## ログイン情報
### ■ who : 自分以外のログイン情報
```
who
```
## ディレクトリ構造表示
### ■ tree : ディレクトリの中身を階層構造（ツリー構造）で表示
```
tree [ディレクトリ]
```
## 環境変数
### ■ printenv : 環境変数を表示
```
printenv
```
## パッケージ管理
### ■ dnf : パッケージ管理コマンド（RHEL系）
※dnfコマンドは依存関係の解消もしてくれる→インストールするパッケージが必要とするパッケージも同時にインストールしてくれる  
```
dnf install [パッケージ名] : パッケージのインストール
dnf remove [パッケージ名] : パッケージの削除
dnf list installed : インストールされているパッケージ一覧
```

## ファイアウォール
### ■ firewall-cmd : ファイアウォールを操作するためのコマンド
```
firewall-cmd --list-all : 現在のゾーン設定を全て表示
firewall-cmd --add-service=http --permanent : HTTP（80番ポート）を永続的に許可する設定を追加
firewall-cmd --reload : permanent の設定を反映するためのリロード
```

## サービス管理
### ■ systemctl : Linuxのサービス管理を一括で操作するためのコマンド
```
systemctl start [サービス名] : サービスを今すぐ起動
systemctl stop [サービス名] : サービスの停止
systemctl restart [サービス名] : サービスの再起動
systemctl enable [サービス名] : OS 起動時に自動でサービスを起動する設定
systemctl disable [サービス名] : 自動起動を OFF
systemctl status [サービス名] : サービスの状態を確認
```

