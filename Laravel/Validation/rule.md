# ã‚ˆãä½¿ã†ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ«ãƒ¼ãƒ«ä¸€è¦§

## ç”¨é€”åˆ¥ã¾ã¨ã‚

| ç¨®é¡ | ãƒ«ãƒ¼ãƒ« | æ„å‘³ |  
|:--:|:--:|:--:|  
| å¿…é ˆ | required | å¿…é ˆå…¥åŠ› |  
| ä»»æ„ | nullable | null ã‚’è¨±å¯ |  
| å‹ | string | æ–‡å­—åˆ— |  
| å‹ | integer | æ•´æ•° |  
| å‹ | numeric | æ•°å€¤ã¨ã—ã¦æ‰±ãˆã‚‹ |  
| å‹ | boolean | çœŸå½å€¤ |  
| é•·ã• | max:x | æœ€å¤§æ–‡å­—æ•°/æœ€å¤§å€¤ |  
| é•·ã• | min:x | æœ€å°æ–‡å­—æ•°/æœ€å°å€¤ |  
| å½¢å¼ | email | ãƒ¡ãƒ¼ãƒ«å½¢å¼ |  
| å½¢å¼ | url | URLå½¢å¼ |  
| å½¢å¼ | date | æ—¥ä»˜ |  
| é…åˆ— | array | é…åˆ—ã§ã‚ã‚‹ã“ã¨ |  
| é…åˆ— | items.*.name | å„è¦ç´ ã«é©ç”¨ |  
| é¸æŠè‚¢ | in | æŒ‡å®šã—ãŸå€¤ã®ä¸­ã‹ã‚‰é¸ã¶ |  
| é¸æŠè‚¢ | not_in | æŒ‡å®šã—ãŸå€¤ä»¥å¤–ã§ã‚ã‚‹ |  
| DB | unique | é‡è¤‡ç¦æ­¢ |  
| DB | uniqueï¼ˆé™¤å¤–ï¼‰ | æ›´æ–°æ™‚ã«è‡ªåˆ†ã‚’é™¤å¤– |  
| DB | exists | DBã«å­˜åœ¨ã™ã‚‹å€¤ã‹ |  
| æ­£è¦è¡¨ç¾ | regex | ãƒ‘ã‚¿ãƒ¼ãƒ³ä¸€è‡´ |  

### â€» æ›¸ãæ–¹ã¯é †ä¸åŒã§

Laravel ã¯ é…åˆ—ã®é †ç•ªã‚’ä¸€åˆ‡æ°—ã«ã—ãªã„ã®ã§ã€ã©ã‚“ãªé †ç•ªã§æ›¸ã„ã¦ã‚‚å‹•ä½œã¯åŒã˜  
ãŸã ã€é †ç•ªãŒã‚ã‚‹ã¨èª­ã¿ã‚„ã™ã„ã®ã§ã€  
ã€Œå¿…é ˆ â†’ å‹ â†’ é•·ã• â†’ å½¢å¼ â†’ DBã€ã®é †ãŒå¤šã„

---

## ğŸ”¹ å¿…é ˆãƒ»ä»»æ„ç³»

### â–  required  
â†’ å¿…é ˆå…¥åŠ›ã€‚ç©ºæ¬„ãƒ»nullãƒ»ç©ºæ–‡å­—ãƒ»ç©ºé…åˆ—ã¯NGã€‚

### â–  nullable
â†’ null ã‚’è¨±å¯ã™ã‚‹ã€‚  
ï¼ˆnull ä»¥å¤–ã®å€¤ãŒæ¥ãŸã‚‰ä»–ã®ãƒ«ãƒ¼ãƒ«ã¯é©ç”¨ã•ã‚Œã‚‹ï¼‰

## ğŸ”¹ å‹ãƒã‚§ãƒƒã‚¯ç³»

### â–  string
â†’ æ–‡å­—åˆ—ã§ã‚ã‚‹ã“ã¨ã€‚

### â–  integer
â†’ æ•´æ•°ã§ã‚ã‚‹ã“ã¨ã€‚  
ï¼ˆ"10" ã®ã‚ˆã†ãªæ•°å€¤æ–‡å­—åˆ—ã‚‚OKï¼‰

### â–  numeric
â†’ æ•°å€¤ã¨ã—ã¦æ‰±ãˆã‚‹ã“ã¨ã€‚  
ï¼ˆæ•´æ•°ãƒ»å°æ•°ãƒ»æ•°å€¤æ–‡å­—åˆ—ã™ã¹ã¦OKï¼‰

### â–  boolean
â†’ çœŸå½å€¤ã§ã‚ã‚‹ã“ã¨ã€‚  
ï¼ˆtrue/false, 1/0, "1"/"0" ãªã©ï¼‰

## ğŸ”¹ æ–‡å­—æ•°ãƒ»æ•°å€¤ç¯„å›²ç³»

### â–  max:50
â†’ æœ€å¤§æ–‡å­—æ•° / æœ€å¤§å€¤ / æœ€å¤§è¦ç´ æ•°ã€‚

### â–  min:1
â†’ æœ€å°æ–‡å­—æ•° / æœ€å°å€¤ / æœ€å°è¦ç´ æ•°ã€‚

## ğŸ”¹ å½¢å¼ãƒã‚§ãƒƒã‚¯ç³»

### â–  email
â†’ ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹å½¢å¼ã§ã‚ã‚‹ã“ã¨ã€‚

### â–  url
â†’ URLå½¢å¼ã§ã‚ã‚‹ã“ã¨ã€‚

### â–  date
â†’ æ—¥ä»˜ã¨ã—ã¦è§£é‡ˆã§ãã‚‹ã“ã¨ã€‚

## ğŸ”¹ é…åˆ—ç³»

### â–  array
â†’ é…åˆ—ã§ã‚ã‚‹ã“ã¨ã€‚

### â–  items.*.name
â†’ é…åˆ—ã®å„è¦ç´ ã«å¯¾ã—ã¦ãƒ«ãƒ¼ãƒ«ã‚’é©ç”¨ã™ã‚‹ã€‚

ä¾‹ï¼š  
items ãŒ [ {name: "A"}, {name: "B"} ] ã®å ´åˆ  
â†’ "A" ã¨ "B" ã®ä¸¡æ–¹ã«é©ç”¨ã•ã‚Œã‚‹ã€‚  

### â–  ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰
ãƒ»è¦ªé…åˆ— â†’ items  
ãƒ»é…åˆ—ã®å…¨è¦ç´  â†’ items.*  
  ï¼ˆå…¨è¦ç´ ã«å¯¾ã—ã¦åŒã˜ãƒ«ãƒ¼ãƒ«ã‚’é©ç”¨ï¼‰  
ãƒ»è¦ç´ ã®ä¸­ã®ã‚­ãƒ¼ã‚’æŒ‡å®š â†’ items.*.name  
  ï¼ˆæŒ‡å®šã—ãŸã‚­ãƒ¼ã®å€¤å…¨ã¦ã«åŒã˜ãƒ«ãƒ¼ãƒ«ã‚’é©ç”¨ï¼‰

## ğŸ”¹ é¸æŠè‚¢ãƒã‚§ãƒƒã‚¯ç³»ï¼ˆè¿½åŠ ï¼šin / not_inï¼‰

### â–  in:foo,bar,baz  
â†’ æŒ‡å®šã—ãŸå€¤ã®ä¸­ã‹ã‚‰é¸ã°ã‚Œã¦ã„ã‚‹ã“ã¨ã€‚  
ï¼ˆé¸æŠè‚¢ã®åˆ¶é™ï¼‰

ä¾‹ï¼š  
```php
'status' => ['required', 'in:draft,published,archived']
```

### â–  not_in:foo,bar,baz
â†’ æŒ‡å®šã—ãŸå€¤â€œä»¥å¤–â€ã§ã‚ã‚‹ã“ã¨ã€‚  
ï¼ˆç¦æ­¢ã—ãŸã„å€¤ãŒã‚ã‚‹ã¨ãï¼‰

ä¾‹ï¼š  
```php
'role' => ['required', 'not_in:superadmin']
```

## ğŸ”¹ DBç³»ï¼ˆå®Ÿå‹™ã§æœ€é‡è¦ï¼‰

â€» ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’å‚ç…§ã™ã‚‹ãŸã‚ã€ãƒ†ãƒ¼ãƒ–ãƒ«åã¨ã‚«ãƒ©ãƒ åã‚’æ­£ã—ãè¨˜è¿°ã™ã‚‹  

### â–  unique: é‡è¤‡ç¦æ­¢ï¼ˆãã®å€¤ãŒã¾ã ä½¿ã‚ã‚Œã¦ã„ãªã„ã‹ãƒã‚§ãƒƒã‚¯ï¼‰
â†’ æŒ‡å®šãƒ†ãƒ¼ãƒ–ãƒ«ã®æŒ‡å®šã‚«ãƒ©ãƒ ã«â€œåŒã˜å€¤ãŒå­˜åœ¨ã—ãªã„ã“ã¨â€ã€‚  
ï¼ˆé‡è¤‡ç¦æ­¢ï¼‰

åŸºæœ¬å½¢ï¼š  
`'unique:ãƒ†ãƒ¼ãƒ–ãƒ«å,ã‚«ãƒ©ãƒ å'`

ä¾‹ï¼š  
```php
'email' => ['required', 'email', 'unique:users,email'],
```

### â–  unique:table,column,exceptï¼ˆæ›´æ–°æ™‚ã®é™¤å¤–ï¼‰
â†’ æ›´æ–°æ™‚ã«â€œè‡ªåˆ†ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã ã‘é™¤å¤–â€ã—ã¦é‡è¤‡ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã€‚

å…¬å¼ï¼š  
`unique:ãƒ†ãƒ¼ãƒ–ãƒ«å,ã‚«ãƒ©ãƒ å,é™¤å¤–ã—ãŸã„IDï¼ˆä¸»ã‚­ãƒ¼ï¼‰`

```php
'unique:users,email,' . $this->id
```

### â–  unique:table,column,except,idColumnï¼ˆç¬¬4å¼•æ•°ã‚ã‚Šï¼‰

å…¬å¼ï¼š  
`unique:ãƒ†ãƒ¼ãƒ–ãƒ«å,ã‚«ãƒ©ãƒ å,é™¤å¤–ã™ã‚‹å€¤,ãã®å€¤ãŒå…¥ã£ã¦ã„ã‚‹ã‚«ãƒ©ãƒ åï¼ˆä¸»ã‚­ãƒ¼ä»¥å¤–ï¼‰`  

â–  ä¸»ã‚­ãƒ¼ãŒ id ãªã‚‰4ç•ªç›®ã¯çœç•¥ã§ãã‚‹  
â–  ä¸»ã‚­ãƒ¼ãŒ id ä»¥å¤–ã®ã¨ãã«4ç•ªç›®ã‚’ä½¿ã†  
â–  4ç•ªç›®ã¯ã€Œã“ã®ã‚«ãƒ©ãƒ ã®å€¤ã‚’é™¤å¤–ã—ã¦ã­ã€ã¨ã„ã†æŒ‡å®š  

```php
'unique:users,email,' . $this->id . ',id'
```

# Ruleã‚¯ãƒ©ã‚¹ç‰ˆ
å…¬å¼æ¨å¥¨ã§ä¸€ç•ªèª­ã¿ã‚„ã™ã„å½¢

```php
use Illuminate\Validation\Rule;

'email' => [
    'required',
    'email',
    Rule::unique('users', 'email')->ignore($this->id),
],
```
#### â– ãƒ¡ãƒªãƒƒãƒˆ  
ãƒ»èª­ã¿ã‚„ã™ã„  
ãƒ»ã‚«ãƒ©ãƒ åã‚„æ¡ä»¶ã‚’æŸ”è»Ÿã«è¿½åŠ ã§ãã‚‹  
ãƒ»è¤‡åˆãƒ¦ãƒ‹ãƒ¼ã‚¯ã«ã‚‚å¯¾å¿œã—ã‚„ã™ã„  

### â–  exists: å­˜åœ¨ãƒã‚§ãƒƒã‚¯ï¼ˆå¤–éƒ¨ã‚­ãƒ¼ã®æ•´åˆæ€§ï¼‰
â†’ æŒ‡å®šãƒ†ãƒ¼ãƒ–ãƒ«ã®æŒ‡å®šã‚«ãƒ©ãƒ ã«â€œãã®å€¤ãŒå­˜åœ¨ã—ã¦ã„ã‚‹ã“ã¨â€ã€‚  
ï¼ˆå¤–éƒ¨ã‚­ãƒ¼ã®æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯ï¼‰

åŸºæœ¬å½¢ï¼š  
`'exists:ãƒ†ãƒ¼ãƒ–ãƒ«å,ã‚«ãƒ©ãƒ å'`  

ä¾‹ï¼š  
```php
'category_id' => ['required', 'exists:categories,id'],
```

### â–  æ¡ä»¶ä»˜ã existsï¼ˆç‰¹å®šã®æ¡ä»¶ã‚’æº€ãŸã™ãƒ¬ã‚³ãƒ¼ãƒ‰ã®ã¿OKï¼‰

```php
Rule::exists('categories', 'id')->where('active', 1)
```

### â–  é…åˆ—ã¨çµ„ã¿åˆã‚ã›ã‚‹ï¼ˆitems.*.idï¼‰

```php
'items.*.id' => ['required', 'exists:products,id'],
```
â†’ items é…åˆ—ã®å„è¦ç´ ã® id ãŒ products ãƒ†ãƒ¼ãƒ–ãƒ«ã«å­˜åœ¨ã™ã‚‹ã“ã¨ã€‚

## ğŸ”¹ æ­£è¦è¡¨ç¾ç³»

### â–  regex:/pattern/
â†’ æŒ‡å®šã—ãŸæ­£è¦è¡¨ç¾ã«ä¸€è‡´ã™ã‚‹ã“ã¨ã€‚

ä¾‹ï¼š  
```php
'code' => ['regex:/^[A-Z0-9]{8}$/']
```





