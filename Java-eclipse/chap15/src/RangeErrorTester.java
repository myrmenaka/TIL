// 1æ¡(0~9)ã®åŠ ç®—ã‚’è¡Œã†ãƒ—ãƒ­ã‚°ãƒ©ãƒ 
// å…¥åŠ›å€¤ã‚„è¨ˆç®—çµæžœãŒ1æ¡ã®ç¯„å›²å¤–ãªã‚‰ã€ç‹¬è‡ªä¾‹å¤–ã‚’ä½¿ã£ã¦é€šçŸ¥ã™ã‚‹


/*
 * ç‹¬è‡ªä¾‹å¤–ã®è¨­è¨ˆ ï¼šã€€RangeError ã‚’åŸºåº•ã«ã—ã¦ã€å…¥åŠ›ç”¨ãƒ»çµæžœç”¨ã®ä¾‹å¤–ã‚’æ´¾ç”Ÿ
 * éžæ¤œæŸ»ä¾‹å¤–ã®æ´»ç”¨ ï¼š RuntimeException ã‚’ç¶™æ‰¿ã—ã¦ã€throws å®£è¨€ã‚’çœç•¥å¯èƒ½ã«
 * å…¥åŠ›æ¤œè¨¼ã®æ˜Žç¢ºåŒ– ï¼š isValid() ã§ 0ã€œ9 ã®ç¯„å›²ãƒã‚§ãƒƒã‚¯ã‚’ä¸€å…ƒåŒ–
 * ä¾‹å¤–ã«ã‚ˆã‚‹åˆ¶å¾¡ ï¼š ä¸æ­£ãªå€¤ã‚’æ¤œå‡ºã—ãŸã‚‰å³åº§ã«ä¾‹å¤–ã§å‡¦ç†ã‚’åˆ†å²
 */

/*
 * â€»ã®éƒ¨åˆ†ã¯ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åŒ–ã—ã¦ã¿ãŸã‚‚ã®ã€ä»¥ä¸‹ãƒ¡ãƒªãƒƒãƒˆ
 * ãƒ»å†åˆ©ç”¨ãŒã§ãã‚‹
 * ãƒ»è­¦å‘ŠãŒæ¶ˆãˆã‚‹
 * ãƒ»getValue()ã§ä¾‹å¤–ç™ºç”Ÿæ™‚ã®å€¤ã‚’å–å¾—å¯èƒ½ã«ãªã‚‹
 */

/*
 * â€»2ã€€è­¦å‘Šã«ã¤ã„ã¦
 * Javaã®ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã«é–¢ã™ã‚‹è­¦å‘Š
 * RangeError ãŒ RuntimeException ã‚’ç¶™æ‰¿ã—ã¦ã„ã‚‹ãŸã‚ã€æš—é»™çš„ã« Serializable ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å®Ÿè£…ã—ã¦ã„ã‚‹ã“ã¨ã«ãªã‚‹
 * Javaã§ã¯ã€Serializable ãªã‚¯ãƒ©ã‚¹ã«ã¯ serialVersionUID ã‚’å®šç¾©ã™ã‚‹ã®ãŒæŽ¨å¥¨ã•ã‚Œã¦ã„ã‚‹
 * ãªãœè­¦å‘ŠãŒå‡ºã‚‹ã®ã‹â†“
 * Javaã®ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã¨ã¯ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ãƒã‚¤ãƒˆåˆ—ã«å¤‰æ›ã—ã¦ä¿å­˜ãƒ»é€ä¿¡ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ä»•çµ„ã¿
 * ä¾‹å¤–ã‚¯ãƒ©ã‚¹ï¼ˆRuntimeExceptionï¼‰ã¯ Serializable ã‚’å®Ÿè£…ã—ã¦ã„ã‚‹ã®ã§ã€ç¶™æ‰¿ã—ãŸ RangeError ã‚‚è‡ªå‹•çš„ã«ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºå¯èƒ½ã«ãªã‚‹
 * ãã®ã¨ãã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ç”¨ã®IDï¼ˆserialVersionUIDï¼‰ãŒãªã„ã¨ã€å¾Œã§ã‚¯ãƒ©ã‚¹æ§‹é€ ãŒå¤‰ã‚ã£ãŸã¨ãã«å¾©å…ƒã§ããªããªã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã€è­¦å‘ŠãŒå‡ºã‚‹
 * å¯¾å‡¦æ³•ã¯ã€serialVersionUID ã‚’è¿½åŠ ã™ã‚‹
 * serialVersionUID ã¯ä»»æ„ã® long å€¤ï¼ˆé€šå¸¸ã¯ 1L ã§OKï¼‰
 * IDEãŒè‡ªå‹•ç”Ÿæˆã—ã¦ãã‚Œã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ï¼ˆå³ã‚¯ãƒªãƒƒã‚¯ â†’ Quick Fixï¼‰
 * ãƒ¡ãƒªãƒƒãƒˆâ†“
 * è­¦å‘ŠãŒæ¶ˆãˆã‚‹ ï¼š IDEã‚„ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãŒå®‰å¿ƒã™ã‚‹
 * å°†æ¥ã®äº’æ›æ€§ ï¼š 	ã‚¯ãƒ©ã‚¹æ§‹é€ ãŒå¤‰ã‚ã£ã¦ã‚‚ã€åŒã˜IDãªã‚‰å¾©å…ƒå¯èƒ½
 * æ˜Žç¤ºçš„ãªè¨­è¨ˆ ï¼š ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºå¯¾è±¡ã§ã‚ã‚‹ã“ã¨ã‚’æ„è­˜ã§ãã‚‹
 */

import java.util.*;

// ðŸ”¸ åŸºåº•ã®ç¯„å›²å¤–ä¾‹å¤–ã‚¯ãƒ©ã‚¹ï¼ˆéžæ¤œæŸ»ä¾‹å¤–ã«ã™ã‚‹ãŸã‚ RuntimeException ã‚’ç¶™æ‰¿ï¼‰
class RangeError extends RuntimeException {
	// â€»2 è­¦å‘Šã®å¯¾å‡¦
	private static final long serialVersionUID = 1L; 
	// â€»ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¿½åŠ 
	private final int value;
	
    RangeError(int n) {
        // ä¾‹å¤–ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨ã—ã¦ã€Œç¯„å›²å¤–ã®å€¤: nã€ã‚’è¨­å®š
        super("ç¯„å›²å¤–ã®å€¤:" + n);
        // â€»ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ä¿å­˜
        this.value = n;
    }
    
    // â€»ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å€¤ã‚’å–å¾—ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰
    public int getValue() {
    	return value;
    }
}

// ðŸ”¸ å…¥åŠ›å€¤ãŒç¯„å›²å¤–ã ã£ãŸå ´åˆã®ä¾‹å¤–ï¼ˆä»®å¼•æ•°ç”¨ï¼‰
class ParameterRangeError extends RangeError {
    ParameterRangeError(int n) {
        super(n); // åŸºåº•ã‚¯ãƒ©ã‚¹ã«å€¤ã‚’æ¸¡ã™
    }
}

// ðŸ”¸ è¨ˆç®—çµæžœãŒç¯„å›²å¤–ã ã£ãŸå ´åˆã®ä¾‹å¤–ï¼ˆè¿”å´å€¤ç”¨ï¼‰
class ResultRangeError extends RangeError {
    ResultRangeError(int n) {
        super(n); // åŸºåº•ã‚¯ãƒ©ã‚¹ã«å€¤ã‚’æ¸¡ã™
    }
}

public class RangeErrorTester {
    
    // ðŸ”¸ 1æ¡ã®æ•´æ•°ã‹ã©ã†ã‹ã‚’åˆ¤å®šã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ï¼ˆ0ã€œ9ãŒæœ‰åŠ¹ï¼‰
    static boolean isValid(int n) {
        return n >= 0 && n <= 9;
    }
    
    // ðŸ”¸ 1æ¡ã®æ•´æ•° a ã¨ b ã®åŠ ç®—ã‚’è¡Œã†
    // å…¥åŠ›å€¤ã‚„çµæžœãŒç¯„å›²å¤–ãªã‚‰ã€ãã‚Œãžã‚Œå¯¾å¿œã™ã‚‹ä¾‹å¤–ã‚’æŠ•ã’ã‚‹
    static int add(int a, int b) throws ParameterRangeError, ResultRangeError {
        if (!isValid(a)) throw new ParameterRangeError(a); // aãŒç¯„å›²å¤–ãªã‚‰ä¾‹å¤–
        if (!isValid(b)) throw new ParameterRangeError(b); // bãŒç¯„å›²å¤–ãªã‚‰ä¾‹å¤–
        int result = a + b;
        if (!isValid(result)) throw new ResultRangeError(result); // çµæžœãŒç¯„å›²å¤–ãªã‚‰ä¾‹å¤–
        return result;
    }

    @SuppressWarnings("resource") // Scannerã®closeè­¦å‘Šã‚’æŠ‘åˆ¶
    public static void main(String[] args) {
        Scanner stdIn = new Scanner(System.in); // æ¨™æº–å…¥åŠ›ã‹ã‚‰å€¤ã‚’èª­ã¿å–ã‚‹Scannerã‚’ç”Ÿæˆ
        
        System.out.print("æ•´æ•°a:"); int a = stdIn.nextInt(); // aã®å…¥åŠ›
        System.out.print("æ•´æ•°b:"); int b = stdIn.nextInt(); // bã®å…¥åŠ›
        
        try {
            // åŠ ç®—çµæžœã‚’è¡¨ç¤ºï¼ˆä¾‹å¤–ãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ã‚ã‚Šï¼‰
            System.out.println("ãã‚Œã‚‰ã®å’Œã¯" + add(a, b) + "ã§ã™ã€‚");
        } catch (ParameterRangeError e) {
            // å…¥åŠ›å€¤ãŒç¯„å›²å¤–ã ã£ãŸå ´åˆã®å‡¦ç†
            System.out.println("åŠ ãˆã‚‹æ•°ãŒç¯„å›²å¤–ã§ã™ã€‚\n" + e.getMessage());
            // â€»
            System.out.println("â€»åŠ ãˆã‚‹æ•°ãŒç¯„å›²å¤–ã§ã™: " + e.getValue());
        } catch (ResultRangeError e) {
            // è¨ˆç®—çµæžœãŒç¯„å›²å¤–ã ã£ãŸå ´åˆã®å‡¦ç†
            System.out.println("è¨ˆç®—çµæžœãŒç¯„å›²å¤–ã§ã™ã€‚\n" + e.toString());
        }
    }
}

