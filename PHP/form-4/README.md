# 2025.7.1 - 基本文法 8-4 ラジオボタンとセレクトボックスの送信

## 目的

`ラジオボタン` と `セレクトボックス` から送信された値をPHPで受け取り、正しく処理できるようになる

## 目次

- [ラジオボタンの送信と受け取り方（復習）](#1)
- [セレクトボックス（ `<select>` ）の送信と受け取り方](#2)
- [選択肢が決まっているデータの扱い方](#3)

## MEMO

<a id="1"></a>

### ラジオボタンの送信と受け取り方（復習）

※ `form-2` で扱っている

1. HTMLフォームでラジオボタンを定義
2. PHPで `$_POST['name属性']` を使用して選択された値を取得  

※送信される値は「1つだけ」である点が特徴  

---
<a id="2"></a>

### セレクトボックス（ `<select>` ）の送信と受け取り方

1. `option要素` で選択肢を定義し、`value属性` の値が送信される  
```html
    <select name= "fruits">
      <option value = "りんご">りんご</option>
      <option value = "れもん">れもん</option>
      <option value = "メロン">メロン</option>
    </select>
```
2. PHPで `$_POST['name属性']` を使って選択結果を取得

[参考: mdn web docs : HTML選択要素](https://developer.mozilla.org/ja/docs/Web/HTML/Reference/Elements/select)  

---
<a id="3"></a>

### 選択肢が決まっているデータの扱い方

- 入力内容が想定外の値にならないよう、選択肢をサーバー側でも検証  

    例）`in_array()関数` で受け取った値を許可リストと照合

※`in_array()` : 配列に値が入っているかチェックする  
[参考: PHPマニュアル : in_array](https://www.php.net/manual/ja/function.in-array.php)

```php
in_array($値)
```
→ その変数自体が「配列型」かどうか調べる  

```php
in_array($値, $リスト)
```
→ 入力値がリスト内に含まれるかを確認  

---

## セキュリティ面での注意

- 選択肢の値が予期しないものに改ざんされる可能性があるため、サーバー側でも必ず `バリデーション（ in_array() など）` を行うこと
- ユーザーから受け取ったデータをそのまま表示せず、必ず `htmlspecialchars()` でXSS対策（クロスサイトスクリプティング防止）をすること

---

### 練習問題 

HTMLフォームを使い、PHPでラジオボタンとセレクトボックスの選択結果を受け取って表示

---
## 作業チェックリスト

- ラジオボタンのHTML構造を理解できたか
- セレクトボックスの送信データをPHPで取得できたか
- サーバー側での値の検証（ `in_array()` ）を行ったか
- 出力時に `htmlspecialchars()` を使ってエスケープしたか

---
## 疑問・課題

- サーバー側での検証について  
    `$_POST['']` で自動で配列になるのにどうして改めて配列に記述しているのか
    - `$_POST['']` は、「ユーザーが送ってきた値」が入る箱  
    - その値が「想定されたもの（＝サーバーが許可するもの）」かどうかをチェックするために、`許可リスト（ホワイトリスト）` をサーバー側で持っておく  
        → だから配列に選択肢を改めて記述している  
    - その `ホワイトリスト（$valid～）` に対して `in_array()` を使って照合することで、ユーザーが改ざんして不正な値を送ってきても防げる  
- 「選択肢がフォーム上に固定されていても、クライアント側の入力は信用できない」という前提が、webセキュリティの鉄則  
- サーバー側でのバリデーションを怠ると、思わぬ攻撃ベクトル（XSSやSQLインジェクションの足がかり）になる可能性がある  

例）  
ユーザー「このりんご、食べていい？」  
サーバー「うん、りんごが一覧の中にあるか先に確認するね」  
→ 一覧にあった ＝ 食べていいよ  
→ 一覧になかった ＝ 拒否
    
---

参考: []()
